<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Focus Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #020617; color: #f8fafc; font-family: system-ui, -apple-system, sans-serif; }
        .glass { background: #1e293b; border-radius: 1.5rem; border: 1px solid #334155; }
        input[type="datetime-local"] {
            background: #0f172a; color: #38bdf8; border: 1px solid #334155;
            padding: 8px; border-radius: 12px; font-weight: bold; font-size: 14px;
        }
        .timer-val { font-variant-numeric: tabular-nums; letter-spacing: -2px; }
        .expired { color: #ef4444; }
        [contenteditable] { outline: none; transition: all 0.2s; }
        [contenteditable]:focus { color: #38bdf8; }
    </style>
</head>
<body class="p-6">

    <div class="text-center mb-8">
        <div id="current-time" class="text-gray-500 text-xs tracking-[0.3em] font-bold uppercase mb-4">18:00:00</div>
        
        <div id="main-task" contenteditable="true" class="text-3xl font-extrabold tracking-tight leading-tight mb-6 px-2">
            Введіть головну мету...
        </div>

        <div class="flex flex-col items-center space-y-3">
            <label class="text-[10px] text-gray-500 uppercase tracking-widest font-black">Встановити дедлайн:</label>
            <input type="datetime-local" id="deadline-picker">
        </div>

        <div class="mt-8">
            <div id="timer-display" class="text-6xl font-black timer-val text-blue-400">00:00:00</div>
            <p id="timer-status" class="text-[10px] text-gray-500 uppercase mt-2 tracking-widest">залишилося часу</p>
        </div>
    </div>

    <div class="space-y-4">
        <div class="glass p-6">
            <div class="flex items-center mb-4">
                <span class="bg-blue-500 w-2 h-6 rounded-full mr-3"></span>
                <h2 class="text-xs font-black text-gray-400 uppercase tracking-widest">Пріоритети</h2>
            </div>
            <div id="p-list" contenteditable="true" class="text-lg text-slate-300 leading-relaxed whitespace-pre-wrap">1. 
2. </div>
        </div>

        <div class="glass p-6 border-b-4 border-amber-500/50">
            <h2 class="text-[10px] font-black text-amber-500 uppercase tracking-[0.2em] mb-2">Важливі нотатки</h2>
            <div id="notes" contenteditable="true" class="text-slate-400 italic">Натисніть, щоб додати...</div>
        </div>
    </div>

    <script>
        const timerDisplay = document.getElementById('timer-display');
        const deadlinePicker = document.getElementById('deadline-picker');

        // Встановлення початкового значення (сьогодні + 1 година)
        if (!localStorage.getItem('deadline-picker')) {
            const now = new Date();
            now.setHours(now.getHours() + 1);
            deadlinePicker.value = now.toISOString().slice(0, 16);
        }

        function update() {
            // 1. Поточний годинник
            document.getElementById('current-time').innerText = new Date().toLocaleTimeString('uk-UA');

            // 2. Логіка таймера
            const target = new Date(deadlinePicker.value).getTime();
            const now = new Date().getTime();
            const diff = target - now;

            if (diff <= 0) {
                timerDisplay.innerText = "00:00:00";
                timerDisplay.classList.add('expired');
                document.getElementById('timer-status').innerText = "Час вийшов!";
            } else {
                timerDisplay.classList.remove('expired');
                document.getElementById('timer-status').innerText = "залишилося часу";
                
                const h = Math.floor(diff / 3600000);
                const m = Math.floor((diff % 3600000) / 60000);
                const s = Math.floor((diff % 60000) / 1000);
                
                timerDisplay.innerText = 
                    `${h.toString().padStart(2, '0')}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
            }
        }

        setInterval(update, 1000);

        // Збереження
        const fields = ['main-task', 'deadline-picker', 'p-list', 'notes'];
        fields.forEach(id => {
            const el = document.getElementById(id);
            const val = localStorage.getItem(id);
            if (val) id === 'deadline-picker' ? el.value = val : el.innerText = val;
            
            el.addEventListener('input', () => {
                localStorage.setItem(id, id === 'deadline-picker' ? el.value : el.innerText);
            });
        });
    </script>
</body>
</html>
